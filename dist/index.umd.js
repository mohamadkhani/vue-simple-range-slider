(function(e,b){typeof exports=="object"&&typeof module<"u"?module.exports=b(require("vue"),require("vue-demi")):typeof define=="function"&&define.amd?define(["vue","vue-demi"],b):(e=typeof globalThis<"u"?globalThis:e||self,e.VueSimpleRangeSlider=b(e.Vue,e.vueDemi))})(this,function(e,b){"use strict";const H=Math.max,O=Math.min;function U(y,m,o){let h,S,R,E,g,V,p=0,M=!1,u=!1,A=!0;if(typeof y!="function")throw new TypeError(FUNC_ERROR_TEXT);m=Number(m)||0,typeof o=="object"&&(M=!!o.leading,u="maxWait"in o,R=u?H(Number(o.maxWait)||0,m):R,A="trailing"in o?!!o.trailing:A);function C(i){let l=h,d=S;return h=S=void 0,p=i,E=y.apply(d,l),E}function N(i){return p=i,g=setTimeout(n,m),M?C(i):E}function L(i){let l=i-V,d=i-p,v=m-l;return console.log("remainingWait"),u?O(v,R-d):v}function c(i){let l=i-V,d=i-p;return V===void 0||l>=m||l<0||u&&d>=R}function n(){const i=Date.now();if(c(i))return k(i);g=setTimeout(n,L(i))}function k(i){return g=void 0,A&&h?C(i):(h=S=void 0,E)}function W(){g!==void 0&&clearTimeout(g),p=0,h=V=S=g=void 0}function K(){return g===void 0?E:k(Date.now())}function P(){let i=Date.now(),l=c(i);if(h=arguments,S=this,V=i,l){if(g===void 0)return N(V);if(u)return g=setTimeout(n,m),C(V)}return g===void 0&&(g=setTimeout(n,m)),E}return P.cancel=W,P.flush=K,P}const X=y=>(e.pushScopeId("data-v-62f5882c"),y=y(),e.popScopeId(),y),j=["innerHTML"],q=e.createTextVNode("|"),J=["textContent"],G=["textContent"],Q=X(()=>e.createElementVNode("div",{class:"simple-range-slider-popover-arrow"},null,-1)),Y=["textContent"],Z=X(()=>e.createElementVNode("div",{class:"simple-range-slider-popover-arrow"},null,-1)),$=e.defineComponent({name:"VueSimpleRangeSlider"}),ee=e.defineComponent({...$,props:{modelValue:null,value:null,exponential:{type:Boolean,default:!1},barColor:{default:"#bebebe"},activeBarColor:{default:"#7e7e7e"},max:{default:100},min:{default:0},keepJustSignificantFigures:{type:Boolean,default:!0},significantFigures:{default:2}},emits:["input","update:model-value"],setup(y,{emit:m}){const o=y,h=(t,r)=>(r===2&&(t=Math.min(n.width,Math.max(n.anchor1PositionV,t))),r===1&&(t=Math.max(0,Math.min(d.value?n.anchor2PositionV:n.width,t))),t),S=t=>{if(o.exponential){const r=o.max-o.min;return V((t-o.min)/r,r)*n.width}else return(t-o.min)*P.value},R=t=>{if(o.exponential){const r=o.max-o.min;let s=Math.round(g(t/n.width,r)*r)+o.min;return o.keepJustSignificantFigures&&(s=E(s)),s}else return o.min+Math.round(t/P.value)},E=t=>Number(t.toPrecision(o.significantFigures)),g=(t,r)=>{const s=Math.E+r;return(Math.pow(s,t)-1)/(Math.pow(s,1)-1)},V=(t,r)=>{const s=Math.E;return Math.log(t*(r+s)+1)/Math.log(s+r)},p=e.ref(),M=e.ref(),u=e.ref(),A=e.ref(),C=e.ref(),N=e.ref(),L=e.ref(),c={},n=e.reactive({input1Width:0,input2Width:0,dashInput:80,anchor1PositionV:0,anchor2PositionV:0,isRtl:!1,width:100,draggingAnchor:0,dragStartX:0,dragStartPosition:0,isDragging:!1,changingByKey:!1}),k=15;e.onMounted(()=>{var t;oe(L.value,"direction")==="rtl"&&(n.isRtl=!0),c.ro3=new ResizeObserver(r=>{n.width=r[0].contentRect.width-(d.value?k:0)}),N.value&&(c.ro3.unobserve(N.value),n.width=((t=N.value.getBoundingClientRect())==null?void 0:t.width)-(d.value?k:0))}),e.onUnmounted(()=>{var t;(t=c==null?void 0:c.ro3)==null||t.disconnect()});const W=t=>{T.value=R(t)},K=t=>{v.value=R(t)},P=e.computed(()=>n.width/(o.max-o.min)),i=e.computed({get:()=>n.anchor2PositionV,set:t=>{t!=n.anchor1PositionV&&(t=h(t,2),n.anchor2PositionV!==t&&(n.anchor2PositionV=t),W(t))}}),l=e.computed({get:()=>n.anchor1PositionV,set:t=>{t!=n.anchor1PositionV&&(t=h(t,1),n.anchor1PositionV!==t&&(n.anchor1PositionV=t),K(t))}}),d=e.computed(()=>Array.isArray(a.value)),v=e.computed({get:()=>d.value&&Array.isArray(a.value)?a.value[0]:!d.value&&!Array.isArray(a.value)?a.value:void 0,set:t=>{if(d.value&&Array.isArray(a.value)){if(t===a.value[0])return;a.value=[t||0,a.value[1]]}else if(!d.value&&!Array.isArray(a.value)){if(t===a.value)return;a.value=t}}}),T=e.computed({get:()=>d.value&&Array.isArray(a.value)?a.value[1]:!d.value&&!Array.isArray(a.value)?a.value:void 0,set:t=>{if(d.value&&Array.isArray(a.value)){if(t===a.value[1])return;a.value=[a.value[0],t||0]}else if(!d.value&&!Array.isArray(a.value)){if(t===a.value)return;a.value=t}}}),a=e.computed({get:()=>b.isVue2?o.value:o.modelValue,set:t=>{Array.isArray(t)&&Array.isArray(o.modelValue)&&t[0]===o.modelValue[0]&&t[1]===o.modelValue[1]||!Array.isArray(t)&&t===o.modelValue||(b.isVue2?m("input",t):m("update:model-value",t))}});e.watch(()=>M.value,t=>{c.ro1&&c.ro1.disconnect(),c.ro1=new ResizeObserver(r=>{n.input1Width=r[0].target.getBoundingClientRect().width}),t&&c.ro1.observe(t)},{immediate:!0}),e.watch(()=>A.value,t=>{c.ro2&&c.ro2.disconnect(),c.ro2=new ResizeObserver(r=>{n.input2Width=r[0].target.getBoundingClientRect().width}),t&&c.ro2.observe(t)},{immediate:!0}),e.watch(()=>C.value,t=>{var r;n.dashInput=((r=t==null?void 0:t.getBoundingClientRect())==null?void 0:r.width)||30},{immediate:!0}),e.watch(()=>a.value,(t,r)=>{n.isDragging||(Array.isArray(t)?(l.value=S(t[0]),i.value=S(t[1])):t?l.value=S(t):l.value=0)},{immediate:!0});const _=U(t=>{setTimeout(()=>{var r;v.value=Number.parseInt(((r=u.value)==null?void 0:r.innerText.replace(/,/,""))||"0")},100)},1e3),B=U(t=>{setTimeout(()=>{var r;T.value=Number.parseInt(((r=u.value)==null?void 0:r.innerText.replace(/,/,""))||"0")},100)},1e3),I=e.computed(()=>i.value-l.value<n.input1Width+n.input2Width-15&&d.value);e.watch(()=>I.value,()=>{if(p.value instanceof HTMLInputElement&&document.activeElement===p.value){const t=p.value.selectionStart;p.value instanceof HTMLInputElement&&(p.value.focus(),p.value.setSelectionRange(t,t))}if(u.value instanceof HTMLInputElement&&document.activeElement===u.value){const t=u.value.selectionStart;u.value instanceof HTMLInputElement&&(u.value.focus(),u.value.setSelectionRange(t,t))}});const te=e.computed(()=>({transform:"translateX("+(n.isRtl?n.width-i.value:l.value)+"px)",width:i.value-l.value+15+"px",background:o.activeBarColor})),ne=e.computed(()=>({transform:"translateX("+(n.isRtl?n.width-l.value+(d.value?7.5:-7.5):l.value-7.5)+"px)"})),re=e.computed(()=>({transform:"translateX("+(n.isRtl?n.width-n.anchor2PositionV-7.5:n.anchor2PositionV+7.5)+"px)"})),ie=e.computed(()=>{let t=((n.isRtl?n.width-i.value-k/2:i.value-k/2)+(n.isRtl?n.width-l.value-k/2:l.value-k/2))/2-(n.input1Width+n.input2Width+n.dashInput)/2+1;return t=Math.max(t,-10),t=Math.min(t,n.width-(n.input1Width+n.input2Width+n.dashInput)+10),{transform:"translateX("+t+"px)",width:i.value-l.value+"px",direction:n.isRtl?"rtl":"ltr",minWidth:n.input1Width+n.input2Width+n.dashInput+6+"px"}}),z=(t,r)=>{r.preventDefault(),n.isDragging=!0,n.draggingAnchor=t,n.dragStartX=r.x,t==1?n.dragStartPosition=l.value:n.dragStartPosition=i.value;const s=window;s.$SRSMouseMove=w=>{w.preventDefault(),t==1?n.isRtl?l.value=n.dragStartPosition+n.dragStartX-w.x:l.value=n.dragStartPosition-n.dragStartX+w.x:n.isRtl?i.value=n.dragStartPosition+n.dragStartX-w.x:i.value=n.dragStartPosition-n.dragStartX+w.x};const x=()=>{n.isDragging=!1,document.removeEventListener("mouseup",x),document.removeEventListener("mousemove",s.$SRSMouseMove)};document.addEventListener("mousemove",s.$SRSMouseMove),document.addEventListener("mouseup",x)},F=(t,r)=>{if(n.changingByKey)return;n.changingByKey=!0;let s=40,x=0;const w=()=>{!n.isRtl&&(r.code==="ArrowDown"||r.code==="ArrowLeft")||n.isRtl&&(r.code==="ArrowUp"||r.code==="ArrowRight")?(t==1&&l.value--,t==2&&i.value--):(!n.isRtl&&(r.code==="ArrowUp"||r.code==="ArrowRight")||n.isRtl&&(r.code==="ArrowDown"||r.code==="ArrowLeft"))&&(t==1&&l.value++,t==2&&i.value++)};w();const D=setInterval(()=>{x++,!(x<s)&&(s>1&&s--,w())},5);r.target instanceof HTMLElement&&r.target.addEventListener("keyup",()=>{n.changingByKey=!1,clearInterval(D)})},oe=(t,r)=>{let s;return t.currentStyle?s=t.currentStyle[r]:window.getComputedStyle&&(s=document.defaultView.getComputedStyle(t,null).getPropertyValue(r)),s};return(t,r)=>{var s,x,w,D;return e.openBlock(),e.createElementBlock("div",{class:"simple-range-slider",ref_key:"root",ref:L},[e.createElementVNode("div",{class:"simple-range-slider-bg-bar",style:e.normalizeStyle({background:y.barColor}),ref_key:"bar",ref:N},[e.unref(d)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"simple-range-slider-bar",style:e.normalizeStyle(e.unref(te))},null,4)):e.createCommentVNode("",!0),e.unref(I)?(e.openBlock(),e.createElementBlock("div",{key:1,style:e.normalizeStyle([{right:"unset"},e.unref(ie)]),class:"simple-range-slider-popover simple-range-slider-merged-popover"},[e.createElementVNode("div",{class:"simple-range-slider-input-container",ref_key:"input1Container",ref:M},[e.renderSlot(t.$slots,"prefix",{value:e.unref(v)},void 0,!0),e.createElementVNode("div",{ref_key:"input1",ref:p,class:"input1",style:{display:"inline-block"},contenteditable:"true",innerHTML:(s=e.unref(v))==null?void 0:s.toLocaleString("en-US"),onKeydown:r[0]||(r[0]=(...f)=>e.unref(_)&&e.unref(_)(...f))},null,40,j),e.renderSlot(t.$slots,"suffix",{value:e.unref(v)},void 0,!0)],512),e.createElementVNode("label",null,[e.createElementVNode("div",{style:{display:"inline-block",padding:"0 3px"},ref_key:"input_",ref:C},[t.$slots.splitter?e.renderSlot(t.$slots,"splitter",{key:0},void 0,!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[q],64))],512)]),e.createElementVNode("div",{class:"simple-range-slider-input-container",ref_key:"input2Container",ref:A},[e.renderSlot(t.$slots,"prefix",{value:e.unref(T)},void 0,!0),e.createElementVNode("div",{ref_key:"input2",ref:u,class:"input2",style:{display:"inline-block"},contenteditable:"true",textContent:e.toDisplayString((x=e.unref(T))==null?void 0:x.toLocaleString("en-US")),onKeydown:r[1]||(r[1]=(...f)=>e.unref(B)&&e.unref(B)(...f))},null,40,J),e.renderSlot(t.$slots,"suffix",{value:e.unref(T)},void 0,!0)],512)],4)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"simple-range-slider-anchor",style:e.normalizeStyle(e.unref(ne))},[e.createElementVNode("div",{tabindex:"1",onMousedown:r[2]||(r[2]=e.withModifiers(f=>z(1,f),["prevent","stop"])),onKeydown:r[3]||(r[3]=f=>F(1,f)),class:"simple-range-slider-handle"},null,32),e.unref(I)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle({right:n.isRtl?"0 !important":"",left:n.isRtl?"unset":""}),class:"simple-range-slider-popover simple-range-slider-popover-left"},[e.createElementVNode("div",{class:"simple-range-slider-input-container",ref_key:"input1Container",ref:M},[e.renderSlot(t.$slots,"prefix",{value:e.unref(_)},void 0,!0),e.createElementVNode("div",{ref_key:"input1",ref:p,class:"input1",contenteditable:"true",textContent:e.toDisplayString((w=e.unref(v))==null?void 0:w.toLocaleString("en-US")),style:{display:"inline-block"},onKeydown:r[4]||(r[4]=(...f)=>e.unref(_)&&e.unref(_)(...f))},null,40,G),e.renderSlot(t.$slots,"suffix",{value:e.unref(_)},void 0,!0)],512)],4)),Q],4),e.unref(d)?(e.openBlock(),e.createElementBlock("div",{key:2,class:"simple-range-slider-anchor",style:e.normalizeStyle(e.unref(re))},[e.createElementVNode("div",{tabindex:"1",onMousedown:r[5]||(r[5]=e.withModifiers(f=>z(2,f),["prevent","stop"])),onKeydown:r[6]||(r[6]=f=>F(2,f)),class:"simple-range-slider-handle"},null,32),e.unref(I)?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle({left:n.isRtl?"-3px !important":"",right:n.isRtl?"unset !important":""}),class:"simple-range-slider-popover simple-range-slider-popover-right"},[e.createElementVNode("div",{class:"simple-range-slider-input-container",ref_key:"input2Container",ref:A},[e.renderSlot(t.$slots,"prefix",{value:e.unref(B)},void 0,!0),e.createElementVNode("div",{ref_key:"input2",ref:u,class:"input2",contenteditable:"true",textContent:e.toDisplayString((D=e.unref(T))==null?void 0:D.toLocaleString("en-US")),style:{display:"inline-block"},onKeydown:r[7]||(r[7]=(...f)=>e.unref(B)&&e.unref(B)(...f))},null,40,Y),e.renderSlot(t.$slots,"suffix",{value:e.unref(B)},void 0,!0)],512)],4)),Z],4)):e.createCommentVNode("",!0)],4)],512)}}}),le="";return((y,m)=>{const o=y.__vccOpts||y;for(const[h,S]of m)o[h]=S;return o})(ee,[["__scopeId","data-v-62f5882c"]])});
